{% set active_page = "corpus" %}
{% include "header.html" %}
<div class="container-fluid p-3">
    <div class="row">
        <div class="col-sm-7">
            <span id="corpus-title" class="lead"></span>
            <table id="corpus_viewer" class="table table-bordered table-hover" data-toggle="table"
                data-url="{{url_for('api_chapter', chapter_id=data.chapter_id)}}"
                data-response-handler="response_handler"
                data-toolbar="#corpus-title"
                data-unique-id="verse_id"
                data-cache="false"
                data-search="true"
                data-search-highlight="true"
                data-show-refresh="true"
                data-show-toggle="true"
                data-show-columns="true"
                data-pagination="true"
                data-page-list="[10, 25, 50, 100, 200, All]"
                data-show-jump-to="true"
                data-show-jump-to-by-pages="10"
                data-click-to-select="true"
                data-detail-view="true"
                data-detail-view-icon="false"
                data-detail-formatter="{{config.row_detail_formatter}}_row_detail_formatter"
                data-row-attributes="row_attribute_handler"
                data-key-events="true"
                data-sticky-header="true"
                data-sticky-header-offset-left="1%"
                data-sticky-header-offset-right="26%">
                <thead>
                    <tr>
                        <th scope="col" data-field="edit" data-radio="true"></th>
                        <!-- <th scope="col" data-field="line_id" data-sortable="true">
                            Line
                        </th> -->
                        <th scope="col" data-field="verse_id">
                            Verse
                        </th>
                        <th scope="col" data-field="text" data-formatter="column_text_formatter">
                            Text
                        </th>
                        <th scope="col" data-field="marked" data-align="center" data-formatter="column_marked_formatter" data-card-visible="false">
                            <i class="fa fa-question"></i>
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="col-sm-5 sticky-top align-self-start">
            <!-- For "sticky-top" to work on a "col" element requires "align-self-start" class as well. -->
            <div class="scroll-large">
            {% if current_user.has_permission("annotate") %}
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="task-1-tab" data-toggle="pill" href="#task-1-tab-content" role="tab" aria-controls="task-1-tab-content" aria-selected="true">Task 1</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="task-2-tab" data-toggle="pill" href="#task-2-tab-content" role="tab" aria-controls="task-2-tab-content" aria-selected="false">Task 2</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="task-3-tab" data-toggle="pill" href="#task-3-tab-content" role="tab" aria-controls="task-3-tab-content" aria-selected="false">Task 3</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="task-4-tab" data-toggle="pill" href="#task-4-tab-content" role="tab" aria-controls="task-4-tab-content" aria-selected="false">Task 4</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="task-5-tab" data-toggle="pill" href="#task-5-tab-content" role="tab" aria-controls="task-5-tab-content" aria-selected="false">Task 5</a>
                </li>
            </ul>

            <div class="tab-content" id="pills-tab-content">
                <div class="tab-pane active" id="task-1-tab-content" role="tabpanel" aria-labelledby="task-1-tab">
                    {% include "task_1.html" %}
                </div>
                <div class="tab-pane" id="task-2-tab-content" role="tabpanel" aria-labelledby="task-2-tab">
                    {% include "task_2.html" %}
                </div>
                <div class="tab-pane" id="task-3-tab-content" role="tabpanel" aria-labelledby="task-3-tab">
                    {% include "task_3.html" %}
                </div>
                <div class="tab-pane" id="task-4-tab-content" role="tabpanel" aria-labelledby="task-4-tab">
                    {% include "task_4.html" %}
                </div>
                <div class="tab-pane" id="task-5-tab-content" role="tabpanel" aria-labelledby="task-5-tab">
                    {% include "task_5.html" %}
                </div>
            </div>

            {% endif %}
            </div>
        </div>
    </div>
</div>
<!-- Add Token Modal -- BEGIN -->
<div class="modal fade" id="add-token-modal" tabindex="-1" aria-labelledby="add-token-modal-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="add-token-modal-label">Add Token</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-token-form">
                <table class="table">
                    <tr>
                        <td>Text</td>
                        <td><input type="text" class="form-control" name="token-text" id="add-token-text"
                                placeholder="Text" required></td>
                    </tr>
                    <tr>
                        <td>Lemma</td>
                        <td><input type="text" class="form-control" name="token-lemma" id="add-token-lemma"
                                placeholder="Lemma" required></td>
                    </tr>
                    <tr>
                        <td>Analysis</td>
                        <td><input type="text" class="form-control" name="token-analysis" id="add-token-analysis"
                                placeholder="Analysis"></td>
                    </tr>
                </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button id="add-token" type="button" class="btn btn-primary">Add</button>
            </div>
        </div>
    </div>
</div>
<!-- Add Token Modal -- END -->

<script>
    // used in individual tasks
    const API_URL = "{{url_for('api')}}";
    const SAMPLE_VERSE_DATA_URL = "{{url_for('api_verse', verse_id=0)}}";
    const CURRENT_USERNAME = "{{current_user.username}}";
</script>
<script src="{{url_for('static', filename='custom/js/corpus/elements.js')}}"></script>
<script src="{{url_for('static', filename='custom/js/corpus/functions.js')}}"></script>
<script src="{{url_for('static', filename='custom/js/corpus/tasks.js')}}"></script>
<script src="{{url_for('static', filename='custom/js/corpus/events.js')}}"></script>

{% include "footer.html" %}